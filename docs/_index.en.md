---
title: CloudFront Extensions workshop 
chapter: true
---

# Amazon CloudFront Extensions 

Amazon CloudFront Extensions is an extension for using CloudFront. CloudFront Extensions includes rich set of featured Lambda@Edge, CloudFront Functions, CDK templates for various user scenarios and a monitoring API.

![What is CloudFrontExt](/images/what-is-cloudfrontext.png)


### One stop to find Lambda@Edge and CloudFront Function for different use cases

CloudFront Extensions offers production level Lambda@Edge and CloudFront Functions for common CloudFront use cases, such as redirect, authentication verification, pre-warm, resizing image.

### CloudFront Security Automations with Amazon WAF and Amazon Shield

CloudFront Extensions provides a template that allows you to use Amazon WAF and Amazon Shield on CloudFront, it will automatically deploy a set of WAF rules and Shield protection groups into your account to secure your web applications against below attacks

  - SQL Injection and XSS: The solution configures two native WAF rules that are designed to protect against common SQL injection or cross-site scripting (XSS) patterns in the URI, query string, or body of a request.
  - HTTP flood: This component protects against attacks that consist of a large number of requests from a particular IP address, such as a web-layer DDoS attack or a brute-force login attempt.
  - Bad Bots: This component automatically sets up a honeypot, which is a security mechanism intended to lure and deflect an attempted attack.
  - Scanners and Probes: This component parses application access logs searching for suspicious behavior, such as an abnormal amount of errors generated by an origin. It then blocks those suspicious source IP addresses for a customer-defined period of time.
  - IP Reputation Lists: IP Lists Parser Lambda function which checks third-party IP reputation lists hourly for new ranges to block.
  - Deny list and allow list: This component creates two specific WAF rules that allow you to manually insert IP addresses that you want to block or allow.

### Monitoring API by analyzing CloudFront real-time logs

CloudFront Extensions provides a monitoring API, it obtains metrics such as cache hit rate and download rate by analyzing CloudFront real-time logs, and outputs them through Restful API.

This solution can meet flexible customization requirements, and customize indicator logic from real-time logs according to your specific requirements, which can be implemented only through convenient SQL statements in Athena. The following 10 reference metrics are provided in this example:

- request: the number of requests from the client to CloudFront
- requestOrigin: the number of requests back to the origin
- statusCode: the status code from the client to CloudFront
- statusCodeOrigin: the status code of the back-to-origin
- bandwidth: the bandwidth from the client to CloudFront
- bandwidthOrigin: bandwidth back to origin
- chr (cache hit rate): cache hit rate calculated by the number of requests
- chrBandWith: cache hit ratio calculated by bandwidth
- downloadSpeed: download speed from client to CloudFront
- downloadSpeedOrigin: The download speed of the back-to-origin

The above reference indicators effectively supplement the current CloudWatch monitoring indicators for CloudFront, which can help you understand the operation of CloudFront from multiple dimensions. For the default built-in monitoring metrics of CloudFront, you can refer to [Monitoring CloudFront with Amazon CloudWatch](https://docs.aws.amazon.com/zh_cn/AmazonCloudFront/latest/DeveloperGuide/monitoring-using-cloudwatch.html).



### Implementation Guide
Please refer to [implementation guide](https://awslabs.github.io/aws-cloudfront-extensions/) for more details 
